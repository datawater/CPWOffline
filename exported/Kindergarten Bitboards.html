<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<title>Kindergarten Bitboards - Chessprogramming wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Kindergarten_Bitboards","wgTitle":"Kindergarten Bitboards","wgCurRevisionId":24936,"wgRevisionId":24936,"wgArticleId":1621,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Paul Klee","George Benson","Michael Brecker","Lars Danielsson","Pat Metheny"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Kindergarten_Bitboards","wgRelevantArticleId":1621,"wgRequestId":"Zp7DeF0xYjdSHhMDafgsqQAAAAI","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","wgMFExpandAllSectionsUserOption":false,"wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false}});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","user.tokens":"loading","ext.cite.styles":"ready","ext.embedVideo.styles":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.options@0bhc5ha",function($,jQuery,require,module){mw.user.options.set([]);});mw.loader.implement("user.tokens@0kthzed",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/

});mw.loader.load(["ext.cite.a11y","ext.embedVideo","site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link href="/load.php?debug=false&amp;lang=en&amp;modules=ext.cite.styles%7Cext.embedVideo.styles%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;printable=1&amp;skin=vector" rel="stylesheet"/>
<script async="" src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;printable=1&amp;skin=vector"></script>
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;printable=1&amp;skin=vector" rel="stylesheet"/>
<meta content="MediaWiki 1.30.1" name="generator"/>
<meta content="noindex,follow" name="robots"/>
<link href="/images/favicon.ico" rel="shortcut icon"/>
<link href="/opensearch_desc.php" rel="search" title="Chessprogramming wiki (en)" type="application/opensearchdescription+xml"/>
<link href="https://www.chessprogramming.org/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link href="/Chessprogramming:About" rel="license"/>
<link href="/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="Chessprogramming wiki Atom feed" type="application/atom+xml"/>
<!--[if lt IE 9]><script src="/resources/lib/html5shiv/html5shiv.min.js?40bd4"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Kindergarten_Bitboards rootpage-Kindergarten_Bitboards skin-vector action-view"> <div class="noprint" id="mw-page-base"></div>
<div class="noprint" id="mw-head-base"></div>
<div class="mw-body" id="content" role="main">
<a id="top"></a>
<div class="mw-indicators mw-body-content">
</div>
<h1 class="firstHeading" id="firstHeading" lang="en">Kindergarten Bitboards</h1>
<div class="mw-body-content" id="bodyContent">
<div class="noprint" id="siteSub">From Chessprogramming wiki</div>
<div id="contentSub"></div>
<div class="mw-jump" id="jump-to-nav">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
</div>
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p><b><a href="Main Page.html" title="Main Page">Home</a> * <a href="Board Representation.html" title="Board Representation">Board Representation</a> * <a href="Bitboards.html" title="Bitboards">Bitboards</a> * <a href="Sliding Piece Attacks.html" title="Sliding Piece Attacks">Sliding Piece Attacks</a> * Kindergarten Bitboards</b>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:234px;"><a href="http://www.imj.org.il/imagine/collections/item.asp?itemNum=194576.html"><img alt="" class="thumbimage" height="303" src="images/b/b7/Group_of_Masks.jpg" width="232"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="File:Group of Masks.jpg.html" title="Enlarge"></a></div><a href="Category:Paul Klee.html" title="Category:Paul Klee">Paul Klee</a> - Group of Masks, 1939 <sup class="reference" id="cite_ref-1"><a href="#cite note-1">[1]</a></sup></div></div></div>
<p><b>Kindergarten</b> bitboards <sup class="reference" id="cite_ref-2"><a href="#cite note-2">[2]</a></sup>, <br/> 
was a kind of interactive forum development <sup class="reference" id="cite_ref-3"><a href="#cite note-3">[3]</a></sup> with a lot of meanders <sup class="reference" id="cite_ref-4"><a href="#cite note-4">[4]</a></sup> . There were two issues involved - first to calculate the <a href="Occupancy of any Line.html" title="Occupancy of any Line">occupancy of any line</a> from the <a href="Occupancy.html" title="Occupancy">occupied bitboard</a> <sup class="reference" id="cite_ref-5"><a href="#cite note-5">[5]</a></sup> - and second, compact and dense lookup tables. As a quintessence <a href="Gerd Isenberg.html" title="Gerd Isenberg">Gerd Isenberg</a> came up with this nomination. It relies on fast 64-bit multiplication, but is otherwise quite resource friendly and a compromise between calculation and table-size. 
</p>
<div class="toc" id="toc"><div class="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Ranks and Diagonals"><span class="tocnumber">1</span> <span class="toctext">Ranks and Diagonals</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#File-Attacks"><span class="tocnumber">2</span> <span class="toctext">File-Attacks</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Shared Rank Lookup"><span class="tocnumber">3</span> <span class="toctext">Shared Rank Lookup</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#32-bit Versions"><span class="tocnumber">4</span> <span class="toctext">32-bit Versions</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Magic Compression"><span class="tocnumber">5</span> <span class="toctext">Magic Compression</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#See also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Forum Posts"><span class="tocnumber">7</span> <span class="toctext">Forum Posts</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#External Links"><span class="tocnumber">8</span> <span class="toctext">External Links</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
</ul>
</div>
<h1><span class="mw-headline" id="Ranks_and_Diagonals">Ranks and Diagonals</span></h1>
<p><a href="Ranks.html" title="Ranks">Ranks</a> and <a href="Diagonals.html" title="Diagonals">diagonals</a> - that is their appropriate <a href="On an empty Board.html#LineAttacks" title="On an empty Board">line-mask</a> by square-index - are first intersected by the occupancy of the whole board. Doesn't matter whether the slider itself is cleared or not - it is redundant anyway, considered by the pre-calculated lookup-table.
</p><p>Since there is only up to one bit per file, the <a href="General Setwise Operations.html#Multiplication" title="General Setwise Operations">north-fill multiplication</a> by the A-file maps the diagonal to the 8th rank. Or - since we only need the <a href="First Rank Attacks.html#TheOuterSquares" title="First Rank Attacks">inner six bits</a>, we combine the required shift left one by multiplying with the B-file. Shifting right the product by 58 (64-6) leaves the six-bit occupancy-index in the 0..63 range. For instance the diagonal-attacks of a bishop on d4. 'A'-'H' represent the masked occupied bits along this diagonal, which are either zero or one.
</p>
<table>
<tr>
<td> <div class="thumb tright"><div class="thumbinner" style="width:51px;"><a href="Square Mapping Considerations.html" title="Square Mapping Considerations"><img alt="Cpwmappinghint.JPG" class="thumbimage" height="48" src="images/4/43/Cpwmappinghint.JPG" width="49"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="File:Cpwmappinghint.JPG.html" title="Enlarge"></a></div></div></div></div>
</td>
<td> <i>Code samples and bitboard diagrams rely on <a href="Square Mapping Considerations.html#LittleEndianRankFileMapping" title="Square Mapping Considerations">Little endian file and rank mapping</a></i>.
</td></tr></table>
<p>We need 'B'-'G' as six bit number:
</p>
<pre>
masked line      *  B-File           =  B-G upper six       occupancy 6 bit
. . . . . . . H     . 1 . . . . . .     . A[B C . E F G]    . . . . . . . .
. . . . . . G .     . 1 . . . . . .     . A B C . E F G     . . . . . . . .
. . . . . F . .     . 1 . . . . . .     . A B C . E F .     . . . . . . . .
. . . . E . . .     . 1 . . . . . .     . A B C . E . .  &gt;&gt; . . . . . . . .
. . . . . . . .  *  . 1 . . . . . .  =  . A B C . . . .  58 . . . . . . . .
. . C . . . . .     . 1 . . . . . .     . A B C . . . .     . . . . . . . .
. B . . . . . .     . 1 . . . . . .     . A B . . . . .     . . . . . . . .
A . . . . . . .     . 1 . . . . . .     . A . . . . . .    [B C . E F G]. .
</pre>
<p>The pre-calculated lookup-table contains the <a href="First Rank Attacks.html" title="First Rank Attacks">attacks of the first rank</a> - but eight copies in each <a href="Ranks.html" title="Ranks">rank</a> or <a href="Byte.html" title="Byte">byte</a>. It is indexed by the six bit occupied-state ('B'-'G') and the <a href="Files.html" title="Files">file</a> of the slider's <a href="Squares.html" title="Squares">square</a>. It needs to be intersected with the same line-mask as formerly the occupancy - to map the first rank attack bits to the appropriate line - that's all. Appropriate pre-calculated attack bits are represented by 'a'-'h':
</p>
<pre>
8 copies of rank      the attack set
attacks &amp; l-mask  -&gt;  of this line
a b c . e f g h       . . . . . . . h
a b c . e f g h       . . . . . . g .
a b c . e f g h       . . . . . f . .
a b c . e f g h       . . . . e . . .
a b c . e f g h       . . . . . . . .
a b c . e f g h       . . c . . . . .
a b c . e f g h       . b . . . . . .
a b c . e f g h       a . . . . . . .
</pre>
<p>Since all <a href="Ranks.html" title="Ranks">ranks</a>, <a href="Diagonals.html" title="Diagonals">diagonals</a> and <a href="Anti-Diagonals.html" title="Anti-Diagonals">anti-diagonals</a> are properly file-aligned, it works perfectly with some redundant occupied bits for shorter diagonals as well, like here the outer bit 'B':
</p>
<pre>
masked line      *  B-File           =  B-G upper six       occupancy 6 bit
. . . . . . . .     . 1 . . . . . .     H .[B C . E F G]    . . . . . . . .
. . . . . . . H     . 1 . . . . . .     . . B C . E F G     . . . . . . . .
. . . . . . G .     . 1 . . . . . .     . . B C . E F G     . . . . . . . .
. . . . . F . .     . 1 . . . . . .     . . B C . E F .  &gt;&gt; . . . . . . . .
. . . . E . . .  *  . 1 . . . . . .  =  . . B C . E . .  58 . . . . . . . .
. . . . . . . .     . 1 . . . . . .     . . B C . . . .     . . . . . . . .
. . C . . . . .     . 1 . . . . . .     . . B C . . . .     . . . . . . . .
. B . . . . . .     . 1 . . . . . .     . . B . . . . .    [B C . E F G]. .
</pre>
<p>Appropriate pre-calculated attack bits are represented by 'b'-'h' here:
</p>
<pre>
8 copies of rank      the attack set   or  the attack set
attacks &amp; l-mask  -&gt;  of this line     -&gt;  of the shorter diagonal
a b c . e f g h       . . . . . . . h      . . . . . . . .
a b c . e f g h       . . . . . . g .      . . . . . . . h
a b c . e f g h       . . . . . f . .      . . . . . . g .
a b c . e f g h       . . . . e . . .      . . . . . f . .
a b c . e f g h       . . . . . . . .      . . . . e . . .
a b c . e f g h       . . c . . . . .      . . . . . . . .
a b c . e f g h       . b . . . . . .      . . c . . . . .
a b c . e f g h       a . . . . . . .      . b . . . . . .
</pre>
<p>Wasn't that simple? That is why it is called <b>kindergarten</b> bitboards!
</p><p>The trick is to share one 4KByte table by three line-directions by re-using the mask for a final intersection. Of course one may use the calculated occupied state to index <a href="Rotated Bitboards.html" title="Rotated Bitboards">rotated bitboards</a> like tables of 32KByte each. But dividing the table size by 3*8 on the cost of that additional 'and' (and keeping the mask inside a register) is tempting. Of course - like always with computation versus memory issues - it depends on the cache- and memory using and footprint inside a particular chess program and the hardware architecture, which solution is preferable. So far L1 <a class="external text" href="https://en.wikipedia.org/wiki/Cache" rel="nofollow">Cache</a> is a rare resource, <a class="external text" href="https://en.wikipedia.org/wiki/Translation_Lookaside_Buffer" rel="nofollow">Translation Lookaside Buffer</a> als well.
</p><p>Like other none rotated approaches, namely <a href="Magic Bitboards.html" title="Magic Bitboards">magic bitboards</a> or <a href="Hyperbola Quintessence.html#ArrayOfStructs" title="Hyperbola Quintessence">hyperbola quintessence</a>, the nice thing is that one can <a href="Hiding the Implementation.html" title="Hiding the Implementation">hide the implementation details</a> behind a stateless interface. In <a href="C.html" title="C">C</a> /<a href="Cpp.html" title="Cpp">C++</a> one may use <a class="external text" href="https://en.wikipedia.org/wiki/Header_file" rel="nofollow">header files</a> with exclusive, conditional compiled inlined routines, as combinations and variations of the mentioned approaches.
</p><p>The three routines only differ by the line-mask applied. As pointed out by <a href="Aleks Peshkov.html" title="Aleks Peshkov">Aleks Peshkov</a>, it is smarter to index by file, occupancy, since fillUpAttacks[sq&amp;7] may be shared by two (bishop) or three (queen) line-attack getters.
</p>
<pre>
U64 fillUpAttacks[8][64];  // 4 KByte

U64 diagonalAttacks(U64 occ, enumSquare sq) {
   const U64 bFile = C64(0x0202020202020202);
   occ = (diagonalMaskEx[sq] &amp; occ) * bFile &gt;&gt; 58;
   return diagonalMaskEx[sq] &amp; fillUpAttacks[sq&amp;7][occ];
}

U64 antiDiagAttacks(U64 occ, enumSquare sq) {
   const U64 bFile = C64(0x0202020202020202);
   occ = (antidiagMaskEx[sq] &amp; occ) * bFile &gt;&gt; 58;
   return antidiagMaskEx[sq] &amp; fillUpAttacks[sq&amp;7][occ];
}

U64 rankAttacks(U64 occ, enumSquare sq) {
   const U64 bFile = C64(0x0202020202020202);
   occ = (rankMaskEx[sq] &amp; occ) * bFile &gt;&gt; 58;
   return rankMaskEx[sq] &amp; fillUpAttacks[sq&amp;7][occ];
}
</pre>
<p>One may use similar structs for the line-masks than the <a href="Hyperbola Quintessence.html#ArrayOfStructs" title="Hyperbola Quintessence">hyperbola quintessence</a>.
</p><p><span id="FileAttacks"></span>
</p>
<h1><span class="mw-headline" id="File-Attacks">File-Attacks</span></h1>
<p><a href="Files.html" title="Files">Files</a> need tad more work. Shift the board left (arithmetical right!) to the A-file to mask it. To get the inner six bits, a <a href="Flipping Mirroring and Rotating.html#FiletoaRank" title="Flipping Mirroring and Rotating">flip-multiplication</a> by the c2-h7 diagonal is applied with further shift right 58. The lookup-table contains the A-file attacks, which are shifted "back" to the original file.
</p>
<pre>
U64 aFileAttacks [8][64];  // 4 KByte

U64 fileAttacks(U64 occ, enumSquare sq) {
   const U64 aFile   = C64(0x0101010101010101);
   const U64 diac2h7 = C64(0x0080402010080400);
   occ = aFile  &amp; (occ &gt;&gt; (sq&amp;7));
   occ = (diac2h7 *  occ ) &gt;&gt; 58;
   return aFileAttacks[sq&gt;&gt;3][occ] &lt;&lt; (sq&amp;7);
}
</pre>
<p>This is how it works:
</p>
<pre>
masked A-file    *  c2-h7 Diagonal    =  occupancy
H . . . . . . .     . . . . . . . .     . .[G F E D C B]    . . . . . . . .
G . . . . . . .     . . . . . . . 1     . . F E D C B A     . . . . . . . .
F . . . . . . .     . . . . . . 1 .     . . E D C B A .     . . . . . . . .
E . . . . . . .     . . . . . 1 . .     . . D C B A . .  &gt;&gt; . . . . . . . .
D . . . . . . .  *  . . . . 1 . . .  =  . . C B A . . .  58 . . . . . . . .
C . . . . . . .     . . . 1 . . . .     . . B A . . . .     . . . . . . . .
B . . . . . . .     . . 1 . . . . .     . . A . . . . .     . . . . . . . .
A . . . . . . .     . . . . . . . .     . . . . . . . .    [G F E D C B]. .
</pre>
<p>Note that the six inner bit occupancy is reversed - considered in the pre-calculated aFileAttacks <a href="Array.html" title="Array">array</a>. This reversed lookup was justified to share first rank-attacks by all directions - with a dense lookup of 512 Byte. But the 4KByte tables outperform the additional multiplications and shift of the dense version - and one may alternatively multiply with the flipped diagonal, the c7-h2 anti-diagonal:
</p>
<pre>
masked A-file    *  c7-h2 AntiDiag   =  occupancy
H . . . . . . .     . . . . . . . .     . .[B C D E F G]    . . . . . . . .
G . . . . . . .     . . 1 . . . . .     . . A B C D E F     . . . . . . . .
F . . . . . . .     . . . 1 . . . .     . . . A B C D E     . . . . . . . .
E . . . . . . .     . . . . 1 . . .     . . . . A B C D  &gt;&gt; . . . . . . . .
D . . . . . . .  *  . . . . . 1 . .  =  . . . . . A B C  58 . . . . . . . .
C . . . . . . .     . . . . . . 1 .     . . . . . . A B     . . . . . . . .
B . . . . . . .     . . . . . . . 1     . . . . . . . A     . . . . . . . .
A . . . . . . .     . . . . . . . .     . . . . . . . .    [B C D E F G]. .
</pre>
<h1><span class="mw-headline" id="Shared_Rank_Lookup">Shared Rank Lookup</span></h1>
<p>As often, <a href="Space-Time Tradeoff.html" title="Space-Time Tradeoff">computation versus memory size</a>. One may share a 512Byte Lookup of the first rank by all lines with some trailing computation. Multiplying with the A-file (fill north) for ranks and diagonals, and multiplying with the diagonal for the file. Likely the additional multiplication don't pays off.
</p>
<pre>
const BYTE firstRankAttacks[8][64];

U64 fileAttacks(U64 occ, enumSquare sq) {
   const U64 aFile   = C64(0x0101010101010101);
   const U64 hFile   = C64(0x8080808080808080);
   const U64 diaa1h8 = C64(0x8040201008040201);
   const U64 diac2h7 = C64(0x0080402010080400);

   unsigned int f = sq &amp; 7;
   occ =   aFile   &amp; (occ   &gt;&gt;  f);
   occ = ( diac2h7 *  occ ) &gt;&gt; 58;
   occ =   diaa1h8 * firstRankAttacks[(sq^56)&gt;&gt;3][occ];
   return ( hFile  &amp;  occ ) &gt;&gt; (f^7);
}

U64 diagonalAttacks(U64 occ, enumSquare sq) {
   const U64 aFile = C64(0x0101010101010101);
   const U64 bFile = C64(0x0202020202020202);

   unsigned int f = sq &amp; 7;
   occ  =  diagonalMaskEx[sq] &amp; occ;
   occ  = (bFile * occ ) &gt;&gt; 58;
   occ  =  aFile *  firstRankAttacks[f][occ];
   return  diagonalMaskEx[sq] &amp; occ;
}
</pre>
<h1><span class="mw-headline" id="32-bit_Versions">32-bit Versions</span></h1>
<p>One other variation of the memory versus computation theme was encouraged by 32-bit mode. 64-bit multiplication is quite expensive in 32-bit mode - a call using three imuls. Thus, it is more efficient to use shift-or plus 32-bit multiplication, which might in fact be used in 64-bit mode as well. <a href="Piotr Cichy.html" title="Piotr Cichy">Piotr Cichy</a> proposed a multiplication less <a href="Parallel Prefix Algorithms.html" title="Parallel Prefix Algorithms">parallel prefix shift</a> approach similar to <a href="Occupancy of any Line.html" title="Occupancy of any Line">Occupancy of any Line</a> <sup class="reference" id="cite_ref-6"><a href="#cite note-6">[6]</a></sup> , which is a good alternative for processors with slow multiplication.
</p><p>An efficient and tricky file-approach was introduced by <a href="Zach Wegner.html" title="Zach Wegner">Zach Wegner</a> <sup class="reference" id="cite_ref-7"><a href="#cite note-7">[7]</a></sup>, using a 32KByte, <a href="Rotated Bitboards.html" title="Rotated Bitboards">rotated like</a> lookup-table:
It is quite strange, yes, but it is an out of order mapping. There are only 5 bits because each bit in the factor maps more than one bit. The trick here is the odd shift 29, so that the multiply does not overflow individual bits. I have since found that 25 and 27 will work with the same magic:
</p>
<pre>
occ
. . . . . . . .
a . . . . . . .
b . . . . . . .    occ | occ &gt;&gt; 29    * 0x01041041 with the index bracketed
c . . . . . . .    ...\               ...\               ...\
d . . . . . . .    d . . . . . . .    1 . . . . . . .    d a[f c e b d a]
e . . . . . . .    e . . a . . . .    . . 1 . . . . .    e b . a f c e b
f . . . . . . .    f . . b . . . .    . . . . 1 . . .    f c . b . . f c
. . . . . . . .    . . . c . . . .    1 . . . . . 1 .    . . . c . . . .
</pre>
<p>The interesting thing is that this works for any masked file. In fact if it was shifted to the a-file, you could get away with the 3-bit factor 0x00041040 (but using a shift of 23).
</p>
<pre>
U64 arrFileAttacks[64][64]; // [sq][occ64] 32KByte

U64 fileAttacks(U64 occ, enumSquare sq) {
   occ &amp;= fileMask[sq];
   U32 fold  = (U32)occ | (U32)(occ &gt;&gt; 29);
   U32 occ64 = fold * 0x01041041 &gt;&gt; 26;
   return arrFileAttacks[sq][occ64];
}
</pre>
<p>Ranks and diagonals are trivial, this version favors rotated like memory size for less computation and same operations than file-attacks. One may therefor generalize the routine by a line-direction parameter:
</p>
<pre>
U64 arrDiagonalAttacks[64][64]; // [sq][occ64] 32KByte

U64 diagonalAttacks(U64 occ, enumSquare sq) {
   occ &amp;= diagonalMaskEx[sq];
   U32 fold  = (U32)occ | (U32)(occ &gt;&gt; 32);
   U32 occ64 = fold * 0x02020202 &gt;&gt; 26;
   return arrDiagonalAttacks[sq][occ64];
}
</pre>
<p>A similar approach was proposed by <a href="Andrew Fan.html" title="Andrew Fan">Andrew Fan</a> in 2009, been active in his <a href="FireFly.html" title="FireFly">own engine</a> for a few years (2006 earliest recorded file time) <sup class="reference" id="cite_ref-8"><a href="#cite note-8">[8]</a></sup>.
<span id="MagicCompression"></span>
</p>
<h1><span class="mw-headline" id="Magic_Compression">Magic Compression</span></h1>
<p>So far Kindergarten bitboards performs a <a href="Hash Table.html#PerfectHashing" title="Hash Table">perfect hashing</a> of the up to six relevant and scattered occupied bits of any line to a six-bit index - which is a bijective mapping of 64 different occupancies per line to 64 indices for the precalculated attack sets.
</p><p>If we have a closer look to the attack sets, say of a rook on the a-file, we enumerate far less disjoint sets. A rook on a1 (a8) has seven different attack-sets on that file, depending on the occupancy of a2-a7. On a2 (a7) there is even one attack set less, on a3 (a6) 2 times 5 and on a4 (a5) 3 times 4 attack-sets. Thus, there are {7, 6, 10, 12, 12, 10, 6, 7} disjoint attack-sets per square on line, or 70 in total over all eight squares.
</p><p>While kindergarten bitboards apply a minimal perfect mapping of scattered bits to a six-bit index, the mapping of the attack-sets is surjective, since each of the 64 occupancies maps only up to 12 distinct sets. Of course that is because occupancies "behind" the first blocker are redundant and map the same attack.
</p><p><a href="Grant Osborne.html" title="Grant Osborne">Grant Osborne</a> came up with the idea, derived from <a href="Magic Bitboards.html" title="Magic Bitboards">magic bitboards</a> - to use different "magic" factors per square (rank), where multiplication may produce carries and enough so called constructive collisions to gain only five or even four bit indices and therefor denser tables. Since different squares may have different table sizes (16 or 32 entries), a Java-like <a href="Array.html" title="Array">array</a> is used for the attacks, in C implemented as array of pointers to the arbitrary sized attack tables. The variable right shift by either 60 or 59 is encoded inside the otherwise redundant upper six bits of the magic factor, as mentioned in <a href="Magic Bitboards.html#IncorporatingtheShift" title="Magic Bitboards">incorporating the shift</a> of magic bitboards.
</p><p>Grant's proposal, so far with {5,4,4,5,5,4,4,5} bit ranges for the lookups per square for vertical rook attacks, results in a 1.5 KByte array instead the 4KByte of the initial Kindergarten file attack getter <sup class="reference" id="cite_ref-9"><a href="#cite note-9">[9]</a></sup> . Whether the effort of the rank-indexed magic-factor plus additional pointer indirection pays off the memory saving is another question, and should be tried inside a concrete chess program with its individual cache- and memory footprint.
</p>
<pre>
U64 aFileAttacks[4*32+4*16]; // 1.5KByte
U64 aPtrFileAttacks[8]; // points to appropriate aFileAttacks
U64 fileMagic[8] = {
   0xEFFFA39DB01B23A3, // 5-bit
   0xF024691A3227FF42, // 4-bit
   0xF2808817CAD6FF0C, // 4-bit see below
   0xED6EDFBE467977D5, // 5-bit
   0xEC87CB0D961EC43A, // 5-bit
   0xF2FF594E14D8801C, // 4-bit
   0xF2FF5D69D4E3E7D6, // 4-bit
   0xEE404B349599FF88  // 5-bit
};

U64 fileAttacks(U64 occ, enumSquare sq) {
   unsigned int file = sq &amp;  7;
   unsigned int rank = sq &gt;&gt; 3;

   occ =  0x0001010101010100 &amp; (occ &gt;&gt; file);
   occ = (fileMagic[rank] * occ) &gt;&gt; (fileMagic[rank] &gt;&gt; 58);  // four&amp;five bit index
   return *(aPtrFileAttacks[rank] + occ) &lt;&lt; file;
}
</pre>
<p>The table demonstrates how it works for file-attack of the a3 rook with a four bit range only five relevant occupied bits, since a3 is member of the inner six bits. The empirical determined factor is 0xF2808817CAD6FF0C, six upper bits contain the right shift for the product, for this square shift 60:
</p>
<table class="wikitable">
<tr>
<th> occupancy (A-File)
</th>
<th> product
</th>
<th> index 0..15
</th>
<th> attack set
</th></tr>
<tr>
<td>  o - outer squares don't care<br/>
<p>x - empty or any piece<br/>
. - empty<br/>
b - Blocker - any piece<br/>
R - Rook<br/>
</p>
</td>
<td style="text-align:right;"> occupancy *
<p><code>0xF2808817CAD6FF0C</code>
</p>
</td>
<td style="text-align:center;"> upper<br/>
<p><a href="Nibble.html" title="Nibble">nibble</a><br/>
in<br/>
product<br/>
</p>
</td>
<td>  1 attacked<br/>
<p>. not attacked 
</p>
</td></tr>
<tr>
<td>  o<br/>
<p>x<br/>
x<br/>
x<br/>
b<br/>
R<br/>
b<br/>
o 
</p>
</td>
<td style="text-align:center;"> 1. attack-set
</td>
<td>
</td>
<td>  .<br/>
<p>.<br/>
.<br/>
.<br/>
1<br/>
.<br/>
1<br/>
. 
</p>
</td></tr>
<tr>
<td> <code>0x0000010101000100</code>
</td>
<td style="text-align:right;"> <code>0x3A28F9D5E2FF0C00</code>
</td>
<td style="text-align:center;"> 3
</td>
<td> <code>0x0000000001000100</code>
</td></tr>
<tr>
<td> <code>0x0001010101000100</code>
</td>
<td style="text-align:right;"> <code>0x3934F9D5E2FF0C00</code>
</td>
<td style="text-align:center;"> 3
</td>
<td> <code>0x0000000001000100</code>
</td></tr>
<tr>
<td> <code>0x0000000101000100</code>
</td>
<td style="text-align:right;"> <code>0x6329EDD5E2FF0C00</code>
</td>
<td style="text-align:center;"> 6
</td>
<td> <code>0x0000000001000100</code>
</td></tr>
<tr>
<td> <code>0x0000010001000100</code>
</td>
<td style="text-align:right;"> <code>0x6F51FAC9E2FF0C00</code>
</td>
<td style="text-align:center;"> 6
</td>
<td> <code>0x0000000001000100</code>
</td></tr>
<tr>
<td> <code>0x0001000101000100</code>
</td>
<td style="text-align:right;"> <code>0x6235EDD5E2FF0C00</code>
</td>
<td style="text-align:center;"> 6
</td>
<td> <code>0x0000000001000100</code>
</td></tr>
<tr>
<td> <code>0x0001010001000100</code>
</td>
<td style="text-align:right;"> <code>0x6E5DFAC9E2FF0C00</code>
</td>
<td style="text-align:center;"> 6
</td>
<td> <code>0x0000000001000100</code>
</td></tr>
<tr>
<td> <code>0x0000000001000100</code>
</td>
<td style="text-align:right;"> <code>0x9852EEC9E2FF0C00</code>
</td>
<td style="text-align:center;"> 9
</td>
<td> <code>0x0000000001000100</code>
</td></tr>
<tr>
<td> <code>0x0001000001000100</code>
</td>
<td style="text-align:right;"> <code>0x975EEEC9E2FF0C00</code>
</td>
<td style="text-align:center;"> 9
</td>
<td> <code>0x0000000001000100</code>
</td></tr>
<tr>
<td>  o<br/>
<p>x<br/>
x<br/>
x<br/>
b<br/>
R<br/>
.<br/>
o 
</p>
</td>
<td style="text-align:center;"> 2. attack set
</td>
<td>
</td>
<td>  .<br/>
<p>.<br/>
.<br/>
.<br/>
1<br/>
.<br/>
1<br/>
1 
</p>
</td></tr>
<tr>
<td> <code>0x0000000001000000</code>
</td>
<td style="text-align:right;"> <code>0x17CAD6FF0C000000</code>
</td>
<td style="text-align:center;"> 1
</td>
<td> <code>0x0000000001000101</code>
</td></tr>
<tr>
<td> <code>0x0001000001000000</code>
</td>
<td style="text-align:right;"> <code>0x16D6D6FF0C000000</code>
</td>
<td style="text-align:center;"> 1
</td>
<td> <code>0x0000000001000101</code>
</td></tr>
<tr>
<td> <code>0x0000010101000000</code>
</td>
<td style="text-align:right;"> <code>0xB9A0E20B0C000000</code>
</td>
<td style="text-align:center;"> 11
</td>
<td> <code>0x0000000001000101</code>
</td></tr>
<tr>
<td> <code>0x0001010101000000</code>
</td>
<td style="text-align:right;"> <code>0xB8ACE20B0C000000</code>
</td>
<td style="text-align:center;"> 11
</td>
<td> <code>0x0000000001000101</code>
</td></tr>
<tr>
<td> <code>0x0000000101000000</code>
</td>
<td style="text-align:right;"> <code>0xE2A1D60B0C000000</code>
</td>
<td style="text-align:center;"> 14
</td>
<td> <code>0x0000000001000101</code>
</td></tr>
<tr>
<td> <code>0x0000010001000000</code>
</td>
<td style="text-align:right;"> <code>0xEEC9E2FF0C000000</code>
</td>
<td style="text-align:center;"> 14
</td>
<td> <code>0x0000000001000101</code>
</td></tr>
<tr>
<td> <code>0x0001000101000000</code>
</td>
<td style="text-align:right;"> <code>0xE1ADD60B0C000000</code>
</td>
<td style="text-align:center;"> 14
</td>
<td> <code>0x0000000001000101</code>
</td></tr>
<tr>
<td> <code>0x0001010001000000</code>
</td>
<td style="text-align:right;"> <code>0xEDD5E2FF0C000000</code>
</td>
<td style="text-align:center;"> 14
</td>
<td> <code>0x0000000001000101</code>
</td></tr>
<tr>
<td>  o<br/>
<p>x<br/>
x<br/>
b<br/>
.<br/>
R<br/>
b<br/>
o 
</p>
</td>
<td style="text-align:center;"> 3. attack set
</td>
<td>
</td>
<td>  .<br/>
<p>.<br/>
.<br/>
1<br/>
1<br/>
.<br/>
1<br/>
. 
</p>
</td></tr>
<tr>
<td> <code>0x0001010100000100</code>
</td>
<td style="text-align:right;"> <code>0x216A22D6D6FF0C00</code>
</td>
<td style="text-align:center;"> 2
</td>
<td> <code>0x0000000101000100</code>
</td></tr>
<tr>
<td> <code>0x0000010100000100</code>
</td>
<td style="text-align:right;"> <code>0x225E22D6D6FF0C00</code>
</td>
<td style="text-align:center;"> 2
</td>
<td> <code>0x0000000101000100</code>
</td></tr>
<tr>
<td> <code>0x0000000100000100</code>
</td>
<td style="text-align:right;"> <code>0x4B5F16D6D6FF0C00</code>
</td>
<td style="text-align:center;"> 4
</td>
<td> <code>0x0000000101000100</code>
</td></tr>
<tr>
<td> <code>0x0001000100000100</code>
</td>
<td style="text-align:right;"> <code>0x4A6B16D6D6FF0C00</code>
</td>
<td style="text-align:center;"> 4
</td>
<td> <code>0x0000000101000100</code>
</td></tr>
<tr>
<td>  o<br/>
<p>x<br/>
x<br/>
b<br/>
.<br/>
R<br/>
.<br/>
o 
</p>
</td>
<td style="text-align:center;"> 4. attack set
</td>
<td>
</td>
<td>  .<br/>
<p>.<br/>
.<br/>
1<br/>
1<br/>
.<br/>
1<br/>
1
</p>
</td></tr>
<tr>
<td> <code>0x0000010100000000</code>
</td>
<td style="text-align:right;"> <code>0xA1D60B0C00000000</code>
</td>
<td style="text-align:center;"> 10
</td>
<td> <code>0x0000000101000101</code>
</td></tr>
<tr>
<td> <code>0x0001010100000000</code>
</td>
<td style="text-align:right;"> <code>0xA0E20B0C00000000</code>
</td>
<td style="text-align:center;"> 10
</td>
<td> <code>0x0000000101000101</code>
</td></tr>
<tr>
<td> <code>0x0000000100000000</code>
</td>
<td style="text-align:right;"> <code>0xCAD6FF0C00000000</code>
</td>
<td style="text-align:center;"> 12
</td>
<td> <code>0x0000000101000101</code>
</td></tr>
<tr>
<td> <code>0x0001000100000000</code>
</td>
<td style="text-align:right;"> <code>0xC9E2FF0C00000000</code>
</td>
<td style="text-align:center;"> 12
</td>
<td> <code>0x0000000101000101</code>
</td></tr>
<tr>
<td>  o<br/>
<p>x<br/>
b<br/>
.<br/>
.<br/>
R<br/>
b<br/>
o 
</p>
</td>
<td style="text-align:center;"> 5. attack set
</td>
<td>
</td>
<td>  .<br/>
<p>.<br/>
1<br/>
1<br/>
1<br/>
.<br/>
1<br/>
. 
</p>
</td></tr>
<tr>
<td> <code>0x0000010000000100</code>
</td>
<td style="text-align:right;"> <code>0x578723CAD6FF0C00</code>
</td>
<td style="text-align:center;"> 5
</td>
<td> <code>0x0000010101000100</code>
</td></tr>
<tr>
<td> <code>0x0001010000000100</code>
</td>
<td style="text-align:right;"> <code>0x569323CAD6FF0C00</code>
</td>
<td style="text-align:center;"> 5
</td>
<td> <code>0x0000010101000100</code>
</td></tr>
<tr>
<td>  o<br/>
<p>x<br/>
b<br/>
.<br/>
.<br/>
R<br/>
.<br/>
o 
</p>
</td>
<td style="text-align:center;"> 6. attack set
</td>
<td>
</td>
<td>  .<br/>
<p>.<br/>
1<br/>
1<br/>
1<br/>
.<br/>
1<br/>
1 
</p>
</td></tr>
<tr>
<td> <code>0x0000010000000000</code>
</td>
<td style="text-align:right;"> <code>0xD6FF0C0000000000</code>
</td>
<td style="text-align:center;"> 13
</td>
<td> <code>0x0000010101000101</code>
</td></tr>
<tr>
<td> <code>0x0001010000000000</code>
</td>
<td style="text-align:right;"> <code>0xD60B0C0000000000</code>
</td>
<td style="text-align:center;"> 13
</td>
<td> <code>0x0000010101000101</code>
</td></tr>
<tr>
<td>  o<br/>
<p>b<br/>
.<br/>
.<br/>
.<br/>
R<br/>
b<br/>
o 
</p>
</td>
<td style="text-align:center;"> 7. attack set
</td>
<td>
</td>
<td>  .<br/>
<p>1<br/>
1<br/>
1<br/>
1<br/>
.<br/>
1<br/>
. 
</p>
</td></tr>
<tr>
<td> <code>0x0001000000000100</code>
</td>
<td style="text-align:right;"> <code>0x7F9417CAD6FF0C00</code>
</td>
<td style="text-align:center;"> 7
</td>
<td> <code>0x0001010101000100</code>
</td></tr>
<tr>
<td>  o<br/>
<p>b<br/>
.<br/>
.<br/>
.<br/><br/>
R<br/>
.<br/>
o 
</p>
</td>
<td style="text-align:center;"> 8. attack set
</td>
<td>
</td>
<td>  .<br/>
<p>1<br/>
1<br/>
1<br/>
1<br/>
.<br/>
1<br/>
1 
</p>
</td></tr>
<tr>
<td> <code>0x0001000000000000</code>
</td>
<td style="text-align:right;"> <code>0xFF0C000000000000</code>
</td>
<td style="text-align:center;"> 15
</td>
<td> <code>0x0001010101000101</code>
</td></tr>
<tr>
<td>  o<br/>
<p>.<br/>
.<br/>
.<br/>
.<br/>
R<br/>
b<br/>
o 
</p>
</td>
<td style="text-align:center;"> 9. attack set
</td>
<td>
</td>
<td>  1<br/>
<p>1<br/>
1<br/>
1<br/>
1<br/>
.<br/>
1<br/>
. 
</p>
</td></tr>
<tr>
<td> <code>0x0000000000000100</code>
</td>
<td style="text-align:right;"> <code>0x808817CAD6FF0C00</code>
</td>
<td style="text-align:center;"> 8
</td>
<td> <code>0x0101010101000100</code>
</td></tr>
<tr>
<td>  o<br/>
<p>.<br/>
.<br/>
.<br/>
.<br/>
R<br/>
.<br/>
o 
</p>
</td>
<td style="text-align:center;"> 10. attack set,
<p>no blocker 
</p>
</td>
<td>
</td>
<td>  1<br/>
<p>1<br/>
1<br/>
1<br/>
1<br/>
.<br/>
1<br/>
1 
</p>
</td></tr>
<tr>
<td> <code>0x0000000000000000</code>
</td>
<td style="text-align:right;"> <code>0x0000000000000000</code>
</td>
<td style="text-align:center;"> 0
</td>
<td> <code>0x0101010101000101</code>
</td></tr></table>
<h1><span class="mw-headline" id="See_also">See also</span></h1>
<ul><li> <a href="Flipping Mirroring and Rotating.html#RankFileAndDiagonal" title="Flipping Mirroring and Rotating">Flipping, Mirroring and Rotating of Rank, File and Diagonal</a></li>
<li> <a href="Magic Bitboards.html" title="Magic Bitboards">Magic Bitboards</a></li>
<li> <a href="Occupancy of any Line.html" title="Occupancy of any Line">Occupancy of any Line</a></li>
<li> <a href="Rotated Bitboards.html" title="Rotated Bitboards">Rotated Bitboards</a></li>
<li> <a href="OliThink.html#SlidingPieceAttacks" title="OliThink">Sliding Piece Attacks in OliThink</a></li>
<li> <a href="Winglet.html#SlidingAttacks" title="Winglet">Sliding Piece Attacks in Winglet</a></li></ul>
<h1><span class="mw-headline" id="Forum_Posts">Forum Posts</span></h1>
<ul><li> <a class="external text" href="https://groups.google.com/d/msg/rec.games.chess.computer/YvFagyuVogw/2vNJw_qT8IYJ" rel="nofollow">Re: Rotated bitboards</a> by <a href="Urban Koistinen.html" title="Urban Koistinen">Urban Koistinen</a>, <a href="Computer Chess Forums.html" title="Computer Chess Forums">rgcc</a>, October 31, 1997 » <a href="Occupancy of any Line.html#CollapsedFiles" title="Occupancy of any Line">Collapsed files</a>, <a href="Occupancy of any Line.html#CollapsedRanks" title="Occupancy of any Line">Collapsed ranks</a></li>
<li> <a class="external text" href="https://www.stmintz.com/ccc/index.php?id=489834" rel="nofollow">rotated bitboards obsolete?</a> by <a href="Gerd Isenberg.html" title="Gerd Isenberg">Gerd Isenberg</a>, <a href="CCC.html" title="CCC">CCC</a>, February 26, <a href="Timeline.html#2006" title="Timeline">2006</a></li>
<li> <a class="external text" href="https://www.stmintz.com/ccc/index.php?id=491079" rel="nofollow">Re: Some thoughts on Dann Corbit's rotated alternative</a> by <a href="Steffan Westcott.html" title="Steffan Westcott">Steffan Westcott</a>, <a href="CCC.html" title="CCC">CCC</a>, March 03, 2006</li>
<li> <a class="external text" href="http://www.open-aurec.com/wbforum/viewtopic.php?t=4523.html" rel="nofollow">Compact Bitboard Attacks</a> by <a href="Tom Likens.html" title="Tom Likens">Tom Likens</a>, <a href="Computer Chess Forums.html" title="Computer Chess Forums">Winboard Forum</a>, March 14, <a href="Timeline.html#2006" title="Timeline">2006</a></li>
<li> <a class="external text" href="http://www.open-aurec.com/wbforum/viewtopic.php?topic view=threads&amp;p=26851&amp;t=4523.html" rel="nofollow">Zach's tricky 32-bit approach</a> by <a href="Zach Wegner.html" title="Zach Wegner">Zach Wegner</a>, <a href="Computer Chess Forums.html" title="Computer Chess Forums">Winboard Forum</a>, August 22, <a href="Timeline.html#2006" title="Timeline">2006</a></li>
<li> <a class="external text" href="http://www.open-aurec.com/wbforum/viewtopic.php?f=4&amp;t=5958.html" rel="nofollow">Magic Bitboards Explained!</a> by <a href="Michael Sherwin.html" title="Michael Sherwin">Michael Sherwin</a>, <a href="Computer Chess Forums.html" title="Computer Chess Forums">Winboard Forum</a>, December 04, 2006</li>
<li> <a class="external text" href="http://www.talkchess.com/forum/viewtopic.php?t=24724.html" rel="nofollow">Kindergarten Bitboard Approach by Gerd Isenberg</a> by <a href="Edsel Apostol.html" title="Edsel Apostol">Edsel Apostol</a>, <a href="CCC.html" title="CCC">CCC</a>, November 05, 2008 » <a href="OliThink.html" title="OliThink">OliThink</a></li>
<li> <a class="external text" href="http://www.talkchess.com/forum/viewtopic.php?t=29296.html" rel="nofollow">Kindergarten bitboards without multiplying</a> by <a href="Piotr Cichy.html" title="Piotr Cichy">Piotr Cichy</a>, <a href="CCC.html" title="CCC">CCC</a>, August 07, 2009</li>
<li> <a class="external text" href="http://www.talkchess.com/forum/viewtopic.php?t=30742.html" rel="nofollow">Kindergarten Bitboard help</a> by <a href="Gregory Strong.html" title="Gregory Strong">Gregory Strong</a>, <a href="CCC.html" title="CCC">CCC</a>, November 22, 2009</li>
<li> <a class="external text" href="http://www.open-aurec.com/wbforum/viewtopic.php?f=4&amp;t=50616&amp;p=192200.html" rel="nofollow">32-bit Magic experiments</a> by <a href="Andrew Fan.html" title="Andrew Fan">Andrew Fan</a>, <a href="Computer Chess Forums.html" title="Computer Chess Forums">Winboard Forum</a>, December 03, 2009 » <a href="Magic Bitboards.html" title="Magic Bitboards">Magic Bitboards</a></li>
<li> <a class="external text" href="http://www.talkchess.com/forum/viewtopic.php?t=31348.html" rel="nofollow">Kindergarten bitboards and Xiangqi move genaration?</a> by Han Chengye, <a href="CCC.html" title="CCC">CCC</a>, December 30, 2009 » <a href="Chinese Chess.html" title="Chinese Chess">Chinese Chess</a></li>
<li> <a class="external text" href="http://www.talkchess.com/forum3/viewtopic.php?f=2&amp;t=77339&amp;start=44.html" rel="nofollow">Re: OliThink 5.9.5 is very small</a> by <a href="Oliver Brausch.html" title="Oliver Brausch">Oliver Brausch</a>, <a href="CCC.html" title="CCC">CCC</a>, June 06, 2021 » <a href="OliThink.html" title="OliThink">OliThink</a></li></ul>
<h1><span class="mw-headline" id="External_Links">External Links</span></h1>
<ul><li> <a class="external text" href="https://en.wikipedia.org/wiki/Kindergarten" rel="nofollow">Kindergarten from Wikipedia</a></li>
<li> <a href="Category:George Benson.html" title="Category:George Benson">George Benson</a> -  <a class="external text" href="https://en.wikipedia.org/wiki/This_Masquerade" rel="nofollow">This Masquerade</a>, 1976, <a class="external text" href="https://en.wikipedia.org/wiki/YouTube" rel="nofollow">YouTube</a> Video</li></ul>
<dl><dd> <div class="embedvideo ev_inline ev_top autoResize" style=" width: 646px;"><div class="embedvideowrap" style="width: 640px;"><iframe allowfullscreen="true" frameborder="0" height="360" src="//www.youtube.com/embed/T8eXCdjdSHE?" width="640"></iframe></div></div></dd></dl>
<ul><li> <a href="Category:Pat Metheny.html" title="Category:Pat Metheny">Pat Metheny</a> and friends - <a class="external text" href="https://en.wikipedia.org/wiki/This_Masquerade" rel="nofollow">This Masquerade</a>, <a class="external text" href="https://en.wikipedia.org/wiki/Jazz_Baltica" rel="nofollow">Jazz Baltica</a>, July 6, 2003, <a class="external text" href="https://en.wikipedia.org/wiki/YouTube" rel="nofollow">YouTube</a> Video</li></ul>
<dl><dd> <a class="external text" href="https://en.wikipedia.org/wiki/Nils_Landgren_%28musician%29" rel="nofollow">Nils Landgren</a>, <a href="Category:Lars Danielsson.html" title="Category:Lars Danielsson">Lars Danielsson</a>, <a class="external text" href="https://en.wikipedia.org/wiki/Wolfgang_Haffner" rel="nofollow">Wolfgang Haffner</a>, <a class="external text" href="https://en.wikipedia.org/wiki/Esbj%C3%B6rn_Svensson" rel="nofollow">Esbjörn Svensson</a>, <a href="Category:Pat Metheny.html" title="Category:Pat Metheny">Pat Metheny</a>, <a href="Category:Michael Brecker.html" title="Category:Michael Brecker">Michael Brecker</a></dd>
<dd> <div class="embedvideo ev_inline ev_top autoResize" style=" width: 646px;"><div class="embedvideowrap" style="width: 640px;"><iframe allowfullscreen="true" frameborder="0" height="360" src="//www.youtube.com/embed/Lzrp7H4j8TE?" width="640"></iframe></div></div></dd></dl>
<h1><span class="mw-headline" id="References">References</span></h1>
<div class="mw-references-wrap"><ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite ref-1">↑</a></span> <span class="reference-text"><a class="external text" href="http://www.imj.org.il/en/collections/194576?itemNum=194576.html" rel="nofollow">Paul Klee - Group of Masks</a>, from the <a class="external text" href="https://en.wikipedia.org/wiki/Israel_Museum" rel="nofollow">Israel Museum</a></span>
</li>
<li id="cite_note-2"><span class="mw-cite-backlink"><a href="#cite ref-2">↑</a></span> <span class="reference-text"><a class="external text" href="http://www.open-aurec.com/wbforum/viewtopic.php?f=4&amp;t=5958.html" rel="nofollow">Magic Bitboards Explained!</a> by <a href="Michael Sherwin.html" title="Michael Sherwin">Michael Sherwin</a> and reply by <a href="Gerd Isenberg.html" title="Gerd Isenberg">Gerd Isenberg</a> to call it Kindergarten Bitboards, <a href="Computer Chess Forums.html" title="Computer Chess Forums">Winboard Forum</a>, December 4, <a href="Timeline.html#2006" title="Timeline">2006</a></span>
</li>
<li id="cite_note-3"><span class="mw-cite-backlink"><a href="#cite ref-3">↑</a></span> <span class="reference-text"><a class="external text" href="http://www.open-aurec.com/wbforum/viewtopic.php?t=4523.html" rel="nofollow">Compact Bitboard Attacks</a> by <a href="Tom Likens.html" title="Tom Likens">Tom Likens</a>, <a href="Computer Chess Forums.html" title="Computer Chess Forums">Winboard Forum</a>, March 14, <a href="Timeline.html#2006" title="Timeline">2006</a></span>
</li>
<li id="cite_note-4"><span class="mw-cite-backlink"><a href="#cite ref-4">↑</a></span> <span class="reference-text"><a class="external text" href="https://www.stmintz.com/ccc/index.php?id=489834" rel="nofollow">rotated bitboards obsolete?</a> by <a href="Gerd Isenberg.html" title="Gerd Isenberg">Gerd Isenberg</a>, <a href="CCC.html" title="CCC">CCC</a>, February 26, <a href="Timeline.html#2006" title="Timeline">2006</a></span>
</li>
<li id="cite_note-5"><span class="mw-cite-backlink"><a href="#cite ref-5">↑</a></span> <span class="reference-text"><a class="external text" href="https://www.stmintz.com/ccc/index.php?id=491079" rel="nofollow">Re: Some thoughts on Dann Corbit's rotated alternative</a> by <a href="Steffan Westcott.html" title="Steffan Westcott">Steffan Westcott</a>, <a href="CCC.html" title="CCC">CCC</a>, March 03, 2006</span>
</li>
<li id="cite_note-6"><span class="mw-cite-backlink"><a href="#cite ref-6">↑</a></span> <span class="reference-text"><a class="external text" href="http://www.talkchess.com/forum/viewtopic.php?t=29296.html" rel="nofollow">Kindergarten bitboards without multiplying</a> by <a href="Piotr Cichy.html" title="Piotr Cichy">Piotr Cichy</a>, <a href="CCC.html" title="CCC">CCC</a>, August 07, 2009</span>
</li>
<li id="cite_note-7"><span class="mw-cite-backlink"><a href="#cite ref-7">↑</a></span> <span class="reference-text"><a class="external text" href="http://www.open-aurec.com/wbforum/viewtopic.php?topic view=threads&amp;p=26851&amp;t=4523.html" rel="nofollow">Zach's tricky 32-bit approach</a> by <a href="Zach Wegner.html" title="Zach Wegner">Zach Wegner</a>, <a href="Computer Chess Forums.html" title="Computer Chess Forums">Winboard Forum</a>, August 22, 2006</span>
</li>
<li id="cite_note-8"><span class="mw-cite-backlink"><a href="#cite ref-8">↑</a></span> <span class="reference-text"><a class="external text" href="http://www.open-aurec.com/wbforum/viewtopic.php?f=4&amp;t=50616&amp;p=192200.html" rel="nofollow">32-bit Magic experiments</a> by <a href="Andrew Fan.html" title="Andrew Fan">Andrew Fan</a>, <a href="Computer Chess Forums.html" title="Computer Chess Forums">Winboard Forum</a>, December 03, 2009</span>
</li>
<li id="cite_note-9"><span class="mw-cite-backlink"><a href="#cite ref-9">↑</a></span> <span class="reference-text"><a class="external text" href="http://www.talkchess.com/forum/viewtopic.php?topic view=threads&amp;p=198660&amp;t=21329.html" rel="nofollow">Re: How to reduce the "bits" used in a magic number</a> by <a href="Grant Osborne.html" title="Grant Osborne">Grant Osborne</a>, <a href="CCC.html" title="CCC">CCC</a>, July 04, 2008</span>
</li>
</ol></div>
<p><b><a href="Sliding Piece Attacks.html" title="Sliding Piece Attacks">Up one Level</a></b>
</p>
<!-- 
NewPP limit report
Cached time: 20240722175434
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.037 seconds
Real time usage: 0.040 seconds
Preprocessor visited node count: 298/1000000
Preprocessor generated node count: 684/1000000
Post‐expand include size: 297/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.977      1 Template:MappingHint
100.00%    0.977      1 -total
-->
</div>
<!-- Saved in parser cache with key oscar70_mw1-mw_:pcache:idhash:1621-0!canonical and timestamp 20240722175434 and revision id 24936
 -->
</div> <div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://www.chessprogramming.org/index.php?title=Kindergarten_Bitboards&amp;oldid=24936">https://www.chessprogramming.org/index.php?title=Kindergarten_Bitboards&amp;oldid=24936</a>"					</div>
<div class="catlinks" data-mw="interface" id="catlinks"><div class="mw-normal-catlinks" id="mw-normal-catlinks"><a href="Special:Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category:Paul Klee.html" title="Category:Paul Klee">Paul Klee</a></li><li><a href="Category:George Benson.html" title="Category:George Benson">George Benson</a></li><li><a href="Category:Michael Brecker.html" title="Category:Michael Brecker">Michael Brecker</a></li><li><a href="Category:Lars Danielsson.html" title="Category:Lars Danielsson">Lars Danielsson</a></li><li><a href="Category:Pat Metheny.html" title="Category:Pat Metheny">Pat Metheny</a></li></ul></div></div> <div class="visualClear"></div>
</div>
</div>
<div id="mw-navigation">
<h2>Navigation menu</h2>
<div id="mw-head">
<div aria-labelledby="p-personal-label" class="" id="p-personal" role="navigation">
<h3 id="p-personal-label">Personal tools</h3>
<ul>
<li id="pt-login"><a accesskey="o" href="index.php?title=Special:UserLogin&amp;returnto=Kindergarten+Bitboards&amp;returntoquery=printable%3Dyes.html" title="You are encouraged to log in; however, it is not mandatory [o]">Log in</a></li> </ul>
</div>
<div id="left-navigation">
<div aria-labelledby="p-namespaces-label" class="vectorTabs" id="p-namespaces" role="navigation">
<h3 id="p-namespaces-label">Namespaces</h3>
<ul>
<li class="selected" id="ca-nstab-main"><span><a accesskey="c" href="Kindergarten Bitboards.html" title="View the content page [c]">Page</a></span></li>
<li class="new" id="ca-talk"><span><a accesskey="t" href="index.php?title=Talk:Kindergarten Bitboards&amp;action=edit&amp;redlink=1.html" rel="discussion" title="Discussion about the content page [t]">Discussion</a></span></li>
</ul>
</div>
<div aria-labelledby="p-variants-label" class="vectorMenu emptyPortlet" id="p-variants" role="navigation">
<h3 id="p-variants-label">
<span>Variants</span>
</h3>
<div class="menu">
<ul>
</ul>
</div>
</div>
</div>
<div id="right-navigation">
<div aria-labelledby="p-views-label" class="vectorTabs" id="p-views" role="navigation">
<h3 id="p-views-label">Views</h3>
<ul>
<li class="selected" id="ca-view"><span><a href="Kindergarten Bitboards.html">Read</a></span></li>
<li id="ca-viewsource"><span><a accesskey="e" href="index.php?title=Kindergarten Bitboards&amp;action=edit.html" title="This page is protected.
You can view its source [e]">View source</a></span></li>
<li class="collapsible" id="ca-history"><span><a accesskey="h" href="index.php?title=Kindergarten Bitboards&amp;action=history.html" title="Past revisions of this page [h]">View history</a></span></li>
</ul>
</div>
<div aria-labelledby="p-cactions-label" class="vectorMenu emptyPortlet" id="p-cactions" role="navigation">
<h3 id="p-cactions-label"><span>More</span></h3>
<div class="menu">
<ul>
</ul>
</div>
</div>
<div id="p-search" role="search">
<h3>
<label for="searchInput">Search</label>
</h3>
<form action="/index.php" id="searchform">
<div id="simpleSearch">
<input accesskey="f" id="searchInput" name="search" placeholder="Search Chessprogramming wiki" title="Search Chessprogramming wiki [f]" type="search"/><input name="title" type="hidden" value="Special:Search"/><input class="searchButton mw-fallbackSearchButton" id="mw-searchButton" name="fulltext" title="Search the pages for this text" type="submit" value="Search"/><input class="searchButton" id="searchButton" name="go" title="Go to a page with this exact name if it exists" type="submit" value="Go"/> </div>
</form>
</div>
</div>
</div>
<div id="mw-panel">
<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main Page.html" title="Visit the main page"></a></div>
<div aria-labelledby="p-navigation-label" class="portal" id="p-navigation" role="navigation">
<h3 id="p-navigation-label">Navigation</h3>
<div class="body">
<ul>
<li id="n-mainpage-description"><a accesskey="z" href="Main Page.html" title="Visit the main page [z]">Main page</a></li><li id="n-recentchanges"><a accesskey="r" href="Special:RecentChanges.html" title="A list of recent changes in the wiki [r]">Recent changes</a></li><li id="n-randompage"><a accesskey="x" href="Special:Random.html" title="Load a random page [x]">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li> </ul>
</div>
</div>
<div aria-labelledby="p-tb-label" class="portal" id="p-tb" role="navigation">
<h3 id="p-tb-label">Tools</h3>
<div class="body">
<ul>
<li id="t-whatlinkshere"><a accesskey="j" href="Special:WhatLinksHere/Kindergarten Bitboards.html" title="A list of all wiki pages that link here [j]">What links here</a></li><li id="t-recentchangeslinked"><a accesskey="k" href="Special:RecentChangesLinked/Kindergarten Bitboards.html" rel="nofollow" title="Recent changes in pages linked from this page [k]">Related changes</a></li><li id="t-specialpages"><a accesskey="q" href="Special:SpecialPages.html" title="A list of all special pages [q]">Special pages</a></li><li id="t-permalink"><a href="index.php?title=Kindergarten Bitboards&amp;oldid=24936.html" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="index.php?title=Kindergarten Bitboards&amp;action=info.html" title="More information about this page">Page information</a></li> </ul>
</div>
</div>
</div>
</div>
<div id="footer" role="contentinfo">
<ul id="footer-info">
<li id="footer-info-lastmod"> This page was last edited on 7 June 2021, at 12:19.</li>
<li id="footer-info-copyright">Content is available under <a href="Chessprogramming:About.html" title="Chessprogramming:About">Creative Commons Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)</a> unless otherwise noted.</li>
</ul>
<ul id="footer-places">
<li id="footer-places-privacy"><a href="Chessprogramming:Privacy policy.html" title="Chessprogramming:Privacy policy">Privacy policy</a></li>
<li id="footer-places-about"><a href="Chessprogramming:About.html" title="Chessprogramming:About">About Chessprogramming wiki</a></li>
<li id="footer-places-disclaimer"><a href="Chessprogramming:General disclaimer.html" title="Chessprogramming:General disclaimer">Disclaimers</a></li>
<li id="footer-places-mobileview"><a class="noprint stopMobileRedirectToggle" href="https://www.chessprogramming.org/index.php?title=Kindergarten_Bitboards&amp;printable=yes&amp;mobileaction=toggle_view_mobile">Mobile view</a></li>
</ul>
<ul class="noprint" id="footer-icons">
<li id="footer-copyrightico">
<a href="https://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)" height="31" src="images/cc-by-sa.png" width="88"/></a> </li>
<li id="footer-poweredbyico">
<a href="/www.mediawiki.org/.html"><img alt="Powered by MediaWiki" height="31" src="resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88"/></a> </li>
</ul>
<div style="clear:both"></div>
</div>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.037","walltime":"0.040","ppvisitednodes":{"value":298,"limit":1000000},"ppgeneratednodes":{"value":684,"limit":1000000},"postexpandincludesize":{"value":297,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"timingprofile":["100.00%    0.977      1 Template:MappingHint","100.00%    0.977      1 -total"]},"cachereport":{"timestamp":"20240722175434","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":45});});</script>
</body>
</html>
