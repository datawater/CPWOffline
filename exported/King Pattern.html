<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<title>King Pattern - Chessprogramming wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"King_Pattern","wgTitle":"King Pattern","wgCurRevisionId":25720,"wgRevisionId":25720,"wgArticleId":1264,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Amon Düül II"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"King_Pattern","wgRelevantArticleId":1264,"wgRequestId":"Zp7Del0xYjdSHhMDafgsrgAAAAI","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","wgMFExpandAllSectionsUserOption":false,"wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false}});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","user.tokens":"loading","ext.cite.styles":"ready","ext.embedVideo.styles":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.options@0bhc5ha",function($,jQuery,require,module){mw.user.options.set([]);});mw.loader.implement("user.tokens@0kthzed",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/

});mw.loader.load(["ext.cite.a11y","ext.embedVideo","site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link href="/load.php?debug=false&amp;lang=en&amp;modules=ext.cite.styles%7Cext.embedVideo.styles%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;printable=1&amp;skin=vector" rel="stylesheet"/>
<script async="" src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;printable=1&amp;skin=vector"></script>
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;printable=1&amp;skin=vector" rel="stylesheet"/>
<meta content="MediaWiki 1.30.1" name="generator"/>
<meta content="noindex,follow" name="robots"/>
<link href="/images/favicon.ico" rel="shortcut icon"/>
<link href="/opensearch_desc.php" rel="search" title="Chessprogramming wiki (en)" type="application/opensearchdescription+xml"/>
<link href="https://www.chessprogramming.org/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link href="/Chessprogramming:About" rel="license"/>
<link href="/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="Chessprogramming wiki Atom feed" type="application/atom+xml"/>
<!--[if lt IE 9]><script src="/resources/lib/html5shiv/html5shiv.min.js?40bd4"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-King_Pattern rootpage-King_Pattern skin-vector action-view"> <div class="noprint" id="mw-page-base"></div>
<div class="noprint" id="mw-head-base"></div>
<div class="mw-body" id="content" role="main">
<a id="top"></a>
<div class="mw-indicators mw-body-content">
</div>
<h1 class="firstHeading" id="firstHeading" lang="en">King Pattern</h1>
<div class="mw-body-content" id="bodyContent">
<div class="noprint" id="siteSub">From Chessprogramming wiki</div>
<div id="contentSub"></div>
<div class="mw-jump" id="jump-to-nav">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
</div>
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p><b><a href="Main Page.html" title="Main Page">Home</a> * <a href="Board Representation.html" title="Board Representation">Board Representation</a> * <a href="Bitboards.html" title="Bitboards">Bitboards</a> * King Pattern</b>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:254px;"><a href="http://en.wikipedia.org/wiki/File:Moore d.gif.html"><img alt="" class="thumbimage" height="247" src="images/4/41/Moore_d.gif" width="252"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="File:Moore d.gif.html" title="Enlarge"></a></div>Moore neighborhood  <sup class="reference" id="cite_ref-1"><a href="#cite note-1">[1]</a></sup></div></div></div>
<p><b>King pattern</b> are about <b>king attacks</b>, some <a href="King Safety.html" title="King Safety">king safety</a> issues and <a href="Pawn Endgame.html" title="Pawn Endgame">pawn endgame</a> related stuff. There is exactly one king per side - the whole game. Not a big issue, but even if white and black kings are member of the <a href="Bitboard Board-Definition.html" title="Bitboard Board-Definition">standard bitboard definition</a> one may avoid <a href="BitScan.html" title="BitScan">bitscanning</a> whole the time. Even without explicit <a href="Piece-Lists.html" title="Piece-Lists">piece-lists</a> , one may consider to keep the redundant king-squares <a href="Incremental Updates.html" title="Incremental Updates">incrementally updated</a> during <a href="Make Move.html" title="Make Move">make</a>/<a href="Unmake Move.html" title="Unmake Move">unmake</a>. 
<span id="KingAttacks"></span>
</p>
<div class="toc" id="toc"><div class="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#King Attacks"><span class="tocnumber">1</span> <span class="toctext">King Attacks</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#by Lookup"><span class="tocnumber">1.1</span> <span class="toctext">by Lookup</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#by Calculation"><span class="tocnumber">1.2</span> <span class="toctext">by Calculation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#King Safety"><span class="tocnumber">2</span> <span class="toctext">King Safety</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Pawn-Shield Pattern"><span class="tocnumber">2.1</span> <span class="toctext">Pawn-Shield Pattern</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Vulnerable on distant Checks"><span class="tocnumber">2.2</span> <span class="toctext">Vulnerable on distant Checks</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Branchless"><span class="tocnumber">2.2.1</span> <span class="toctext">Branchless</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#SSE4"><span class="tocnumber">2.2.2</span> <span class="toctext">SSE4</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#King and Pawns"><span class="tocnumber">3</span> <span class="toctext">King and Pawns</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Set-wise Rule of the Square"><span class="tocnumber">3.1</span> <span class="toctext">Set-wise Rule of the Square</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Flood Fill Algorithms"><span class="tocnumber">3.2</span> <span class="toctext">Flood Fill Algorithms</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#See also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#External Links"><span class="tocnumber">5</span> <span class="toctext">External Links</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#References"><span class="tocnumber">6</span> <span class="toctext">References</span></a></li>
</ul>
</div>
<h1><span class="mw-headline" id="King_Attacks">King Attacks</span></h1>
<p>The King <a href="Attacks.html" title="Attacks">attacks</a> all squares in <a class="external text" href="https://en.wikipedia.org/wiki/Moore_neighborhood" rel="nofollow">Moore neighborhood</a>, that is squares with a <a href="Distance.html" title="Distance">Chebyshev distance</a> of one.
</p>
<h2><span class="mw-headline" id="by_Lookup">by Lookup</span></h2>
<p>Likely we have a the square-index handy, to access a table of precalculated king-attacks.
</p>
<pre>
U64 arrKingAttacks[64];

U64 kingAttacks(enumSquare sq) {return arrKingAttacks[sq];}
</pre>
<p>For instance a king on g2:
</p>
<pre>
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . . . 1 1 1
. . . . . 1 . 1
. . . . . 1 1 1
</pre>
<p><span id="byCalculation"></span>
</p>
<h2><span class="mw-headline" id="by_Calculation">by Calculation</span></h2>
<p>To calculate all eight <a href="Direction.html" title="Direction">directions</a>, one can actually do some simple <a href="Parallel Prefix Algorithms.html" title="Parallel Prefix Algorithms">parallel prefix stuff</a>. Rather than to do a union of all eight <a href="General Setwise Operations.html#OneStepOnly" title="General Setwise Operations">direction-steps</a>, one first applies the <a href="General Setwise Operations.html#OneStepOnly" title="General Setwise Operations">horizontal attacks</a> considering file-wraps. Those up to two bits are then shifted up and down, together with the king-bitboard itself, to get all the other direction bits:
</p>
<pre>
U64 kingAttacks(U64 kingSet) {
   U64 attacks = eastOne(kingSet) | westOne(kingSet);
   kingSet    |= attacks;
   attacks    |= nortOne(kingSet) | soutOne(kingSet);
   return attacks;
}
</pre>
<p>The routine is handy to initialize the kingAttacks <a href="Array.html" title="Array">arrays</a>:
</p>
<pre>
U64 sqBB = 1;
for (int sq = 0; sq &lt; 64; sq++, sqBB &lt;&lt;= 1)
   arrKingAttacks[sq] = kingAttacks(sqBB);
</pre>
<p>It must not necessarily called with single-populated bitboards, and is base of <a href="King Pattern.html#FloodFillAlgorithms" title="King Pattern">king path fill algorithms</a>.
<span id="KingSafety"></span>
</p>
<h1><span class="mw-headline" id="King_Safety">King Safety</span></h1>
<p><a href="King Safety.html" title="King Safety">King Safety</a> is an important evaluation topic. Some bitboard pattern are about to recognize king safety related features. To evaluate those features is a complete other story.
</p>
<h2><span class="mw-headline" id="Pawn-Shield_Pattern">Pawn-Shield Pattern</span></h2>
<p>During the <a href="Middlegame.html" title="Middlegame">middlegame</a>, the king is encouraged to hide behind own pawn shields. Beside Considering open and half-open files on king's and adjacent files, one idea is to mask potential pawn shield pattern per wing of the king file - and to hash it to an appropriate index range to access tables with precalculated stuff. This mask might be used for kings on f1-h1 or f1-h2:
</p>
<pre>
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . . . 1 1 1
. . . . . 1 1 1
. . . . . . . .
</pre>
<p><span id="VulnerableOnDistantChecks"></span>
</p>
<h2><span class="mw-headline" id="Vulnerable_on_distant_Checks">Vulnerable on distant Checks</span></h2>
<p>Assuming we are aware of all taboo squares of the king. That is the union of own pieces with all opposite attacks, then we can simply calculate a move target set by relative complement of the king attacks.
</p>
<pre>
moveTargets = arrKingAttacks[sq] &amp; ~taboo;
</pre>
<p>If moveTargets is empty - the king has no move. The king might be vulnerable on distant checks from any <a href="Sliding Pieces.html" title="Sliding Pieces">sliding piece</a> <a href="Direction.html" title="Direction">direction</a>, due to lack of any escape. Otherwise, the king might be vulnerable on distant checks, if escape squares are on one line only - either rank, file, diagonal or anti-diagonal:
</p>
<pre>
if ( moveTargets == 0 )
{
   dirSet = 15; // vulnerable on all lines
}
else
{
   dirSet = 0;
   pattern = moveTargets | sqBBofKing;
   if ( pattern &amp; rankBits[sq] == pattern )
      dirSet =  1; // vulnerable on rank, e.g. base rank
   else if ( pattern &amp; fileBits[sq] == pattern )
      dirSet =  2; // vulnerable on file
   else if ( pattern &amp; diagBits[sq] == pattern )
      dirSet =  4; // vulnerable on diagonal
   else if ( pattern &amp; antiBits[sq] == pattern )
      dirSet =  8; // vulnerable on antidiagonal
}
</pre>
<h3><span class="mw-headline" id="Branchless">Branchless</span></h3>
<p>Branchless in C - since boolean compare result is treated 0 or 1 arithmetically:
</p>
<pre>
pattern = moveTargets | sqBBofKing;
dirSet  = ( pattern &amp; rankBits[sq] == pattern ) * 1;
dirSet += ( pattern &amp; fileBits[sq] == pattern ) * 2;
dirSet += ( pattern &amp; diagBits[sq] == pattern ) * 4;
dirSet += ( pattern &amp; antiBits[sq] == pattern ) * 8;
</pre>
<p>to possibly test later
</p>
<pre>
if ( dirSet ) evaluate and look for possible distant mates
</pre>
<p><span id="SSE4"></span>
</p>
<h3><span class="mw-headline" id="SSE4">SSE4</span></h3>
<p>Using the <a href="SSE4.html#SSE4.1" title="SSE4">SSE4.1</a> PCMPEQQ <a href="Quad Word.html" title="Quad Word">Quadword</a> compare for equality instruction via <a class="external text" href="http://msdn.microsoft.com/en-us/library/bb513998.aspx.html" rel="nofollow">_mm_cmpeq_epi64</a> intrinsic, following otherwise <a href="SSE2.html" title="SSE2">SSE2</a> approach might be applied:
</p>
<pre>
struct SKingBits {
    U64 rankBits;
    U64 fileBits;
    U64 diagBits;
    U64 antiBits;
} XMM_ALIGN kingBits[64];

int dirSet(U64 pattern, int sq)
{
   static const U64 XMM_ALIGN weights[4] = {
     C64(0x0000000000000001),
     C64(0x0000000000000002),
     C64(0x0000000000000004),
     C64(0x0000000000000008)
   };
   __m128i x0, x1, x2;
   const __m128i* pKB = (__m128i*)(kingBits + sq);
   const __m128i* pW  = (__m128i*) weights;
   x2 = _mm_cvtsi64x_si128 (pattern);
   x2 = _mm_unpacklo_epi64 (x2, x2);
   x0 = _mm_and_si128   (x2, pKB[0]);
   x1 = _mm_and_si128   (x2, pKB[1]);
   x0 = _mm_cmpeq_epi64 (x0, x2);
   x1 = _mm_cmpeq_epi64 (x1, x2);
   x0 = _mm_and_si128   (x0, pW[0]);
   x1 = _mm_and_si128   (x1, pW[1]);
   x0 = _mm_or_si128    (x0, x1);
   x1 = _mm_unpackhi_epi64 (x0, x0);
   x0 = _mm_or_si128    (x0, x1);
   return _mm_cvtsi128_si32(x0);
}
</pre>
<p><span id="KingAndPawns"></span>
</p>
<h1><span class="mw-headline" id="King_and_Pawns">King and Pawns</span></h1>
<p>Some <a href="Pawn Endgame.html" title="Pawn Endgame">pawn endgame</a> issues. A set-wise <a href="Rule of the Square.html" title="Rule of the Square">rule of the square</a> from king's point of view. Or does a king have a connected path along safe and empty squares to a certain square?
<span id="SetwiseRuleoftheSquare"></span>
</p>
<h2><span class="mw-headline" id="Set-wise_Rule_of_the_Square">Set-wise Rule of the Square</span></h2>
<p>Assuming a black-king on g5 - white to move. What is the set of squares, where a king can never catch a white <a href="Passed Pawn.html" title="Passed Pawn">passer</a>? Or the inverse, where can passers might be caught, considering the <a href="Rule of the Square.html" title="Rule of the Square">rule of the square</a>? In this inverse case, where passers may be close enough, there are other aspects to consider like two distant passers, or passer supported by own king - here it is only about <a class="new" href="index.php?title=Pawn race&amp;action=edit&amp;redlink=1.html" title="Pawn race (page does not exist)">races</a> between passers and opponent king. It is about a set-wise view, where the distance to promotion is greater or equal than the distance of the king. We need to consider <b>double pushes</b> from the initial rank though.
</p>
<pre>
black king on g5    white passers         double pawn push, need
wtm                 possibly caught       to copy 3rd to 2nd rank
. . . . . . . .      . . . . . . . .      . . . . . . . .
. . . . . . . .      . . . . . . . .      . . . . . . . .
. . . . . . . .      . . . . . . . .      . . . . . . . .
. . . . . . K .      . . . 1 1 1 K 1      . . . 1 1 1 K 1
. . . . . . . .      . . 1 1 1 1 1 1      . . 1 1 1 1 1 1
. . . . . . . .      . 1 1 1 1 1 1 1      . 1 1 1 1 1 1 1
. . . . . . . .      1 1 1 1 1 1 1 1      . 1 1 1 1 1 1 1
. . . . . . . .      1 1 1 1 1 1 1 1      1 1 1 1 1 1 1 1
</pre>
<p><i>Of course we may even mask off the base ranks since pawns can not exist there - but since we intersect with passers anyway, it don't cares.</i>
</p><p>We need to consider <a href="Tempo.html" title="Tempo">tempo</a>, if black to move, the area of caught grows accordantly:
</p>
<pre>
black king on g5    white passers
btm                 possibly caught
. . . . . . . .      . . . . . . . .
. . . . . . . .      . . . . . . . .
. . . . . K K K      . . . 1 1 1 1 1
. . . . . K K K      . . 1 1 1 1 K 1
. . . . . K K K      . 1 1 1 1 1 1 1
. . . . . . . .      1 1 1 1 1 1 1 1
. . . . . . . .      1 1 1 1 1 1 1 1
. . . . . . . .      1 1 1 1 1 1 1 1
</pre>
<p>We can now pre-initialize an <a href="Array.html" title="Array">array</a> of <b>caught pawn area</b> for each king square, for both black and white king as well as <a href="Side to move.html" title="Side to move">side to move</a>:
</p>
<pre>
U64 arrCaughtableArea[2][2][64];  // [color of king][side to move][square]

unCaughtable = whitePassers &amp; ~arrCaughtableArea[black][white][squareOfBlackKing];
</pre>
<p>How can the array be initialized, how can we calculate it? That is already some special fill approach. For the mentioned black king, wtm case, we use the rank-distance of the black king to the 8th rank.
</p>
<pre>
distance = rank(kingSquare) ^ 7; // 7 - rank

. . . . 3 . . .
. . . . 2 . . .
. . . . 1 . . .
. . . . K . . .
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . . . . . .
</pre>
<p>One solution is first expand the king-set distance (3) times, in east and west direction along the rank:
</p>
<pre>
caughtable = kingBB;
for (i = 0; i &lt; distance; i++)
   caughtable |= westOne(caughtable) | eastOne(caughtable);

. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . . . 1 1 1     . . . . 1 1 1 1      . . . 1 1 1 1 1
. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . . . . . .     . . . . . . . .      . . . . . . . .
</pre>
<p>Now it is about filling south-west and south-east rank(kingSquare) times, which finally results in the desired set of  catchable passers. Special handling is required for the doubles pushes <sup class="reference" id="cite_ref-2"><a href="#cite note-2">[2]</a></sup>:
</p>
<pre>
for (i = 0; i &lt; rank(kingSquare)-2; i++)
   caughtable |= soutOne(westOne(caughtable) | caughtable | eastOne(caughtable) );
caughtable |= soutOne(caughtable) | 0xff;

. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . . . . . .     . . . . . . . .      . . . . . . . .
. . . 1 1 1 1 1     . . . 1 1 1 1 1      . . . 1 1 1 1 1
. . 1 1 1 1 1 1     . . 1 1 1 1 1 1      . . 1 1 1 1 1 1
. . . . . . . .     . 1 1 1 1 1 1 1   |  . 1 1 1 1 1 1 1
. . . . . . . .     . . . . . . . .   |  . 1 1 1 1 1 1 1
. . . . . . . .     . . . . . . . .   v  1 1 1 1 1 1 1 1
</pre>
<p>To initialize black to move and white king arrays should not that difficult either - and is left to the ambitious reader.
</p><p><span id="FloodFillAlgorithms"></span>
</p>
<h2><span class="mw-headline" id="Flood_Fill_Algorithms">Flood Fill Algorithms</span></h2>
<p>Answering questions like can a king on a1 reach h8 along this path?
</p>
<pre>
. . . . . . 1 T
. . 1 1 1 1 . .
. 1 . . . . . .
. . 1 1 1 1 . .
. . . . . . 1 .
. . . . . . . 1
. . . . . . 1 .
F 1 1 1 1 1 . .
</pre>
<p>The <b>squaresAreConnected</b> flood-fill <sup class="reference" id="cite_ref-3"><a href="#cite note-3">[3]</a></sup> algorithm was introduced by <a href="Steffan Westcott.html" title="Steffan Westcott">Steffan Westcott</a> <sup class="reference" id="cite_ref-4"><a href="#cite note-4">[4]</a></sup>.
</p><p>A flood fill algorithm, like the one below, starting at the "from" square and stopping if the fill hits the to" square or the fill can't make any more progress. The fill progresses in all directions at once, so should return an answer within a few iterations. Each iteration is pretty fast too, as it just a bunch of shifting and logic operations. And no lookup tables either.
</p>
<pre>
/////////////////////////////////////////////////////////////////////////
//
// Returns true if a path of set bits in 'path' exists that 8-way connect
// any set bit in sq1 to any set bit of sq2

bool squaresAreConnected(U64 sq1, U64 sq2, U64 path)
{
   // With bitboard sq1, do an 8-way flood fill, masking off bits not in
   // path at every step. Stop when fill reaches any set bit in sq2, or
   // fill cannot progress any further

   if (!(sq1 &amp;= path) || !(sq2 &amp;= path)) return false;
                      // Drop bits not in path
                      // Early exit if sq1 or sq2 not on any path

   while(!(sq1 &amp; sq2))
   {
      U64 temp = sq1;
      sq1 |= eastOne(sq1) | westOne(sq1);    // Set all 8 neighbours
      sq1 |= soutOne(sq1) | nortOne(sq1);
      sq1 &amp;= path;                           // Drop bits not in path
      if (sq1 == temp) return false;         // Fill has stopped
   }
   return true;                              // Found a good path
}
</pre>
<h1><span class="mw-headline" id="See_also">See also</span></h1>
<ul><li> <a href="All Shortest Paths.html" title="All Shortest Paths">All shortest Paths</a></li>
<li> <a href="Fill Algorithms.html" title="Fill Algorithms">Fill Algorithms</a></li>
<li> <a href="Mate at a Glance.html" title="Mate at a Glance">Mate at a Glance</a></li></ul>
<h1><span class="mw-headline" id="External_Links">External Links</span></h1>
<ul><li> <a class="external text" href="https://en.wikipedia.org/wiki/Checkmate_pattern" rel="nofollow">Checkmate pattern from Wikipedia</a></li>
<li> <a href="Category:Amon D%C3%BC%C3%BCl II.html" title="Category:Amon Düül II">Amon Düül II</a> - Archangel Thunderbird (1971), <a class="external text" href="https://en.wikipedia.org/wiki/YouTube" rel="nofollow">YouTube</a> Video </li></ul>
<dl><dd> <div class="embedvideo ev_inline ev_top autoResize" style=" width: 646px;"><div class="embedvideowrap" style="width: 640px;"><iframe allowfullscreen="true" frameborder="0" height="360" src="//www.youtube.com/embed/XzSi1qPxBIQ?" width="640"></iframe></div></div></dd></dl>
<h1><span class="mw-headline" id="References">References</span></h1>
<div class="mw-references-wrap"><ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite ref-1">↑</a></span> <span class="reference-text"><a class="external text" href="https://en.wikipedia.org/wiki/Moore_neighborhood" rel="nofollow">Moore neighborhood from Wikipedia</a></span>
</li>
<li id="cite_note-2"><span class="mw-cite-backlink"><a href="#cite ref-2">↑</a></span> <span class="reference-text">Thanks to Thomas Herges for pointing out a bug if kings are on the eighth rank</span>
</li>
<li id="cite_note-3"><span class="mw-cite-backlink"><a href="#cite ref-3">↑</a></span> <span class="reference-text"><a class="external text" href="https://en.wikipedia.org/wiki/Flood_fill" rel="nofollow">Flood Fill from Wikipedia</a></span>
</li>
<li id="cite_note-4"><span class="mw-cite-backlink"><a href="#cite ref-4">↑</a></span> <span class="reference-text"><a class="external text" href="https://www.stmintz.com/ccc/index.php?id=251180." rel="nofollow">Re: algorithm question</a> answer by <a href="Steffan Westcott.html" title="Steffan Westcott">Steffan Westcott</a> in <a href="CCC.html" title="CCC">CCC</a> September 09, 2002</span>
</li>
</ol></div>
<p><b><a href="Bitboards.html" title="Bitboards">Up one Level</a></b>
</p>
<!-- 
NewPP limit report
Cached time: 20240722132534
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.021 seconds
Real time usage: 0.023 seconds
Preprocessor visited node count: 290/1000000
Preprocessor generated node count: 614/1000000
Post‐expand include size: 27/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key oscar70_mw1-mw_:pcache:idhash:1264-0!canonical and timestamp 20240722132534 and revision id 25720
 -->
</div> <div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://www.chessprogramming.org/index.php?title=King_Pattern&amp;oldid=25720">https://www.chessprogramming.org/index.php?title=King_Pattern&amp;oldid=25720</a>"					</div>
<div class="catlinks" data-mw="interface" id="catlinks"><div class="mw-normal-catlinks" id="mw-normal-catlinks"><a href="Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category:Amon D%C3%BC%C3%BCl II.html" title="Category:Amon Düül II">Amon Düül II</a></li></ul></div></div> <div class="visualClear"></div>
</div>
</div>
<div id="mw-navigation">
<h2>Navigation menu</h2>
<div id="mw-head">
<div aria-labelledby="p-personal-label" class="" id="p-personal" role="navigation">
<h3 id="p-personal-label">Personal tools</h3>
<ul>
<li id="pt-login"><a accesskey="o" href="index.php?title=Special:UserLogin&amp;returnto=King+Pattern&amp;returntoquery=printable%3Dyes.html" title="You are encouraged to log in; however, it is not mandatory [o]">Log in</a></li> </ul>
</div>
<div id="left-navigation">
<div aria-labelledby="p-namespaces-label" class="vectorTabs" id="p-namespaces" role="navigation">
<h3 id="p-namespaces-label">Namespaces</h3>
<ul>
<li class="selected" id="ca-nstab-main"><span><a accesskey="c" href="King Pattern.html" title="View the content page [c]">Page</a></span></li>
<li class="new" id="ca-talk"><span><a accesskey="t" href="index.php?title=Talk:King Pattern&amp;action=edit&amp;redlink=1.html" rel="discussion" title="Discussion about the content page [t]">Discussion</a></span></li>
</ul>
</div>
<div aria-labelledby="p-variants-label" class="vectorMenu emptyPortlet" id="p-variants" role="navigation">
<h3 id="p-variants-label">
<span>Variants</span>
</h3>
<div class="menu">
<ul>
</ul>
</div>
</div>
</div>
<div id="right-navigation">
<div aria-labelledby="p-views-label" class="vectorTabs" id="p-views" role="navigation">
<h3 id="p-views-label">Views</h3>
<ul>
<li class="selected" id="ca-view"><span><a href="King Pattern.html">Read</a></span></li>
<li id="ca-viewsource"><span><a accesskey="e" href="index.php?title=King Pattern&amp;action=edit.html" title="This page is protected.
You can view its source [e]">View source</a></span></li>
<li class="collapsible" id="ca-history"><span><a accesskey="h" href="index.php?title=King Pattern&amp;action=history.html" title="Past revisions of this page [h]">View history</a></span></li>
</ul>
</div>
<div aria-labelledby="p-cactions-label" class="vectorMenu emptyPortlet" id="p-cactions" role="navigation">
<h3 id="p-cactions-label"><span>More</span></h3>
<div class="menu">
<ul>
</ul>
</div>
</div>
<div id="p-search" role="search">
<h3>
<label for="searchInput">Search</label>
</h3>
<form action="/index.php" id="searchform">
<div id="simpleSearch">
<input accesskey="f" id="searchInput" name="search" placeholder="Search Chessprogramming wiki" title="Search Chessprogramming wiki [f]" type="search"/><input name="title" type="hidden" value="Special:Search"/><input class="searchButton mw-fallbackSearchButton" id="mw-searchButton" name="fulltext" title="Search the pages for this text" type="submit" value="Search"/><input class="searchButton" id="searchButton" name="go" title="Go to a page with this exact name if it exists" type="submit" value="Go"/> </div>
</form>
</div>
</div>
</div>
<div id="mw-panel">
<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main Page.html" title="Visit the main page"></a></div>
<div aria-labelledby="p-navigation-label" class="portal" id="p-navigation" role="navigation">
<h3 id="p-navigation-label">Navigation</h3>
<div class="body">
<ul>
<li id="n-mainpage-description"><a accesskey="z" href="Main Page.html" title="Visit the main page [z]">Main page</a></li><li id="n-recentchanges"><a accesskey="r" href="Special:RecentChanges.html" title="A list of recent changes in the wiki [r]">Recent changes</a></li><li id="n-randompage"><a accesskey="x" href="Special:Random.html" title="Load a random page [x]">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li> </ul>
</div>
</div>
<div aria-labelledby="p-tb-label" class="portal" id="p-tb" role="navigation">
<h3 id="p-tb-label">Tools</h3>
<div class="body">
<ul>
<li id="t-whatlinkshere"><a accesskey="j" href="Special:WhatLinksHere/King Pattern.html" title="A list of all wiki pages that link here [j]">What links here</a></li><li id="t-recentchangeslinked"><a accesskey="k" href="Special:RecentChangesLinked/King Pattern.html" rel="nofollow" title="Recent changes in pages linked from this page [k]">Related changes</a></li><li id="t-specialpages"><a accesskey="q" href="Special:SpecialPages.html" title="A list of all special pages [q]">Special pages</a></li><li id="t-permalink"><a href="index.php?title=King Pattern&amp;oldid=25720.html" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="index.php?title=King Pattern&amp;action=info.html" title="More information about this page">Page information</a></li> </ul>
</div>
</div>
</div>
</div>
<div id="footer" role="contentinfo">
<ul id="footer-info">
<li id="footer-info-lastmod"> This page was last edited on 5 August 2021, at 22:35.</li>
<li id="footer-info-copyright">Content is available under <a href="Chessprogramming:About.html" title="Chessprogramming:About">Creative Commons Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)</a> unless otherwise noted.</li>
</ul>
<ul id="footer-places">
<li id="footer-places-privacy"><a href="Chessprogramming:Privacy policy.html" title="Chessprogramming:Privacy policy">Privacy policy</a></li>
<li id="footer-places-about"><a href="Chessprogramming:About.html" title="Chessprogramming:About">About Chessprogramming wiki</a></li>
<li id="footer-places-disclaimer"><a href="Chessprogramming:General disclaimer.html" title="Chessprogramming:General disclaimer">Disclaimers</a></li>
<li id="footer-places-mobileview"><a class="noprint stopMobileRedirectToggle" href="https://www.chessprogramming.org/index.php?title=King_Pattern&amp;printable=yes&amp;mobileaction=toggle_view_mobile">Mobile view</a></li>
</ul>
<ul class="noprint" id="footer-icons">
<li id="footer-copyrightico">
<a href="https://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)" height="31" src="images/cc-by-sa.png" width="88"/></a> </li>
<li id="footer-poweredbyico">
<a href="/www.mediawiki.org/.html"><img alt="Powered by MediaWiki" height="31" src="resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88"/></a> </li>
</ul>
<div style="clear:both"></div>
</div>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.021","walltime":"0.023","ppvisitednodes":{"value":290,"limit":1000000},"ppgeneratednodes":{"value":614,"limit":1000000},"postexpandincludesize":{"value":27,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20240722132534","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":44});});</script>
</body>
</html>
